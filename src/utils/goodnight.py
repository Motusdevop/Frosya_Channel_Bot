import random
from random import randint

import requests
from loguru import logger


class CatAPIService:
    """
    –°–µ—Ä–≤–∏—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∫–æ—Ç–æ–≤ —Å –ø—É–±–ª–∏—á–Ω–æ–≥–æ API.
    """
    BASE_URL = "https://api.thecatapi.com/v1/images/search"

    @staticmethod
    def get_cat_photos(count: int = 1) -> list[str]:
        """
        –ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –∫–æ—Ç–æ–≤.

        :param count: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (1‚Äì3)
        :return: —Å–ø–∏—Å–æ–∫ URL
        """
        try:
            response = requests.get(CatAPIService.BASE_URL, params={"limit": count}, timeout=5)
            response.raise_for_status()
            data = response.json()
            return [item["url"] for item in data][:count]
        except Exception as e:
            logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Ñ–æ—Ç–æ –∫–æ—Ç–∞: {e}")
            return []


class GoodNightMessage:
    """
    –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π ¬´–°–ø–æ–∫–æ–π–Ω–æ–π –Ω–æ—á–∏¬ª —Å –≤–∞—Ä–∏–∞—Ü–∏—è–º–∏ —Ç–µ–∫—Å—Ç–∞ –∏ —ç–º–æ–¥–∑–∏.
    """

    GREETINGS = [
        "–°–ª–∞–¥–∫–∏—Ö —Å–Ω–æ–≤",
        "–°–ø–æ–∫–æ–π–Ω–æ–π –Ω–æ—á–∏",
        "–ü—Ä–∏—è—Ç–Ω—ã—Ö —Å–Ω–æ–≤–∏–¥–µ–Ω–∏–π",
        "–ü—É—Å—Ç—å –ø—Ä–∏—Å–Ω–∏—Ç—Å—è —á—Ç–æ-—Ç–æ —Ö–æ—Ä–æ—à–µ–µ",
        "–î–æ –∑–∞–≤—Ç—Ä–∞",
        "–ü—É—Å—Ç—å –Ω–æ—á—å –±—É–¥–µ—Ç —É—é—Ç–Ω–æ–π",
        "–ú—è–≥–∫–∏—Ö –ø–æ–¥—É—à–µ–∫ –∏ —Ç—ë–ø–ª–æ–≥–æ –æ–¥–µ—è–ª–∞",
        "–ü—É—Å—Ç—å –ø—Ä–∏—Å–Ω–∏—Ç—Å—è —á—Ç–æ-—Ç–æ –≤–æ–ª—à–µ–±–Ω–æ–µ",
        "–î–æ –≤—Å—Ç—Ä–µ—á–∏ –≤ –Ω–æ–≤–æ–º –¥–Ω–µ",
        "–û—Ç–¥—ã—Ö–∞–π –∏ –Ω–∞–±–∏—Ä–∞–π—Å—è —Å–∏–ª",
        "–ü—É—Å—Ç—å —É—Ç—Ä–æ –±—É–¥–µ—Ç –ª—ë–≥–∫–∏–º –∏ —Ä–∞–¥–æ—Å—Ç–Ω—ã–º",
        "–°–æ–Ω –ø—Ä–∏–Ω–µ—Å—ë—Ç –Ω–æ–≤—ã–µ –∏–¥–µ–∏",
        "–ü—É—Å—Ç—å –Ω–æ—á—å –ø–æ–¥–∞—Ä–∏—Ç –ø–æ–∫–æ–π",
        "–î–æ–±—Ä—ã—Ö –≥—Ä—ë–∑",
        "–°–ª–∞–¥–∫–∏—Ö –∏ —è—Ä–∫–∏—Ö —Å–Ω–æ–≤",
        "–ü—É—Å—Ç—å —Ç–≤–æ–π —Å–æ–Ω –±—É–¥–µ—Ç –≥–ª—É–±–æ–∫–∏–º",
        "–°–∫–æ—Ä–µ–µ –∑–∞—Å—ã–ø–∞–π –≤ —É—é—Ç–µ",
        "–ú–∏—Ä–Ω—ã—Ö –∏ —Å–ø–æ–∫–æ–π–Ω—ã—Ö —Å–Ω–æ–≤",
        "–°—á–∞—Å—Ç–ª–∏–≤—ã—Ö —Å–Ω–æ–≤–∏–¥–µ–Ω–∏–π",
        "–ü—É—Å—Ç—å —Ç–≤–æ–∏ –º–µ—á—Ç—ã –±—É–¥—É—Ç –∫—Ä–∞—Å–∏–≤—ã–º–∏"
    ]

    EMOJIS = [
        "üåå", "‚òÑÔ∏è", "‚≠ê", "‚ú®", "üåÉ", "üåô", "üí§", "üõå",
        "üå†", "üåë", "üåí", "üåì", "üåî", "üåï",
        "üê±", "üêæ", "ü¶â", "üïäÔ∏è", "üå∫", "üå∏",
        "üçµ", "üïØÔ∏è", "üå≤", "üå≥"
    ]

    @staticmethod
    def get_message() -> str:
        """
        –§–æ—Ä–º–∏—Ä—É–µ—Ç —Å–ª—É—á–∞–π–Ω–æ–µ –ø–æ–∂–µ–ª–∞–Ω–∏–µ –Ω–∞ –Ω–æ—á—å.
        """
        greeting = random.choice(GoodNightMessage.GREETINGS)
        emojis = "".join(random.sample(GoodNightMessage.EMOJIS, k=randint(2, 4)))
        return f"{greeting} {emojis}"